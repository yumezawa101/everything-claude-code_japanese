# セキュリティガイドライン

## 必須セキュリティチェック

コミット前に必ず確認：
- [ ] ハードコードされたシークレットがない（API キー、パスワード、トークン）
- [ ] すべてのユーザー入力がバリデートされている
- [ ] SQL インジェクション防止（パラメータ化クエリ）
- [ ] XSS 防止（HTML サニタイズ）
- [ ] CSRF 保護が有効
- [ ] 認証/認可が検証済み
- [ ] すべてのエンドポイントにレート制限
- [ ] エラーメッセージが機密データを漏洩しない

## シークレット管理

```typescript
// 絶対にダメ: ハードコードされたシークレット
const apiKey = "sk-proj-xxxxx"

// 常にこうする: 環境変数
const apiKey = process.env.OPENAI_API_KEY

if (!apiKey) {
  throw new Error('OPENAI_API_KEY が設定されていません')
}
```

## セキュリティ対応プロトコル

セキュリティ問題が見つかった場合：
1. 直ちに停止
2. **security-reviewer** agent を使用
3. 続行前に重大な問題を修正
4. 露出したシークレットをローテーション
5. 類似の問題についてコードベース全体をレビュー
